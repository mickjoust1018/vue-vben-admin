import{r as y,d as v,C as b}from"./index-454d5d36.js";import{aH as $,Y as C,_ as R}from"./index-59f8fabe.js";import{u as s,I,k as x,g as B,x as M,d as P,a7 as w,_ as E,a8 as S,a9 as d,f as g,E as W}from"./vue-bfa52d01.js";import{P as z}from"./index-dd339bf6.js";import"./index-b471d44b.js";import"./antd-2cb51430.js";import"./useContentViewHeight-30ed4137.js";import"./useWindowSizeFn-50158f48.js";import"./onMountedOrActivated-6ab1435a.js";const H=Symbol("watermark-dom"),_=new WeakMap;function L(n=x(document.body)){const r=s(n);if(r&&_.has(r))return _.get(r);const l=$(function(){const t=s(n);if(!t)return;const{clientHeight:e,clientWidth:a}=t;m({height:e,width:a})}),c=H.toString(),i=I(),f=()=>{const t=s(i);i.value=void 0;const e=s(n);e&&(t&&e.removeChild(t),y(e,l))};function u(t){const e=document.createElement("canvas"),a=300,h=240;Object.assign(e,{width:a,height:h});const o=e.getContext("2d");return o&&(o.rotate(-20*Math.PI/120),o.font="15px Vedana",o.fillStyle="rgba(0, 0, 0, 0.15)",o.textAlign="left",o.textBaseline="middle",o.fillText(t,a/20,h)),e.toDataURL("image/png")}function m(t={}){const e=s(i);e&&(C(t.width)&&(e.style.width=`${t.width}px`),C(t.height)&&(e.style.height=`${t.height}px`),C(t.str)&&(e.style.background=`url(${u(t.str)}) left top repeat`))}const k=t=>{if(s(i))return m({str:t}),c;const e=document.createElement("div");i.value=e,e.id=c,e.style.pointerEvents="none",e.style.top="0px",e.style.left="0px",e.style.position="absolute",e.style.zIndex="100000";const a=s(n);if(!a)return c;const{clientHeight:h,clientWidth:o}=a;return m({str:t,width:o,height:h}),a.appendChild(e),_.set(a,{setWatermark:p,clear:f}),c};function p(t){k(t),v(document.documentElement,l),B()&&M(()=>{f()})}return{setWatermark:p,clear:f}}const N=P({components:{CollapseContainer:b,PageWrapper:z},setup(){const n=x(null),{setWatermark:r,clear:l}=L();return{setWatermark:r,clear:l,areaRef:n}}});function T(n,r,l,c,i,f){const u=w("a-button"),m=w("CollapseContainer"),k=w("PageWrapper");return E(),S(k,{title:"水印示例"},{default:d(()=>[g(m,{class:"w-full h-32 bg-white rounded-md",title:"Global WaterMark"},{default:d(()=>[g(u,{type:"primary",class:"mr-2",onClick:r[0]||(r[0]=p=>n.setWatermark("WaterMark Info"))},{default:d(()=>[W(" Create ")]),_:1}),g(u,{color:"error",class:"mr-2",onClick:n.clear},{default:d(()=>[W(" Clear ")]),_:1},8,["onClick"]),g(u,{color:"warning",class:"mr-2",onClick:r[1]||(r[1]=p=>n.setWatermark("WaterMark Info New"))},{default:d(()=>[W(" Reset ")]),_:1})]),_:1})]),_:1})}const q=R(N,[["render",T]]);export{q as default};
